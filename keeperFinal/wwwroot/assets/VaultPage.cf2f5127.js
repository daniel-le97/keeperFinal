import{_ as C,i as I,A as o,C as u,D as _,M as B,j as m,d as i,K as j,c as l,a as t,b as v,g as K,t as h,l as x,y as S,z,B as N,h as k,o as d,p as P,f as M}from"./index.9ee0ee77.js";const A={setup(){const a=z(),s=N();I(()=>{p(),e()});async function p(){try{o.activeVault=null,await u.getVaultById(a.params.id)}catch{_.error("[bad vault]"),s.push({name:"Home"})}}async function e(){try{await u.getKeepsInVault(a.params.id)}catch(n){_.error("[bad user]",n)}}return{editVault(){o.modal=1,o.vaultForm=1,B.getOrCreateInstance("#vaultForm").show()},async deleteVault(n){try{if(!await m.confirm())return;await u.deleteVault(n.id),m.success(`${n.name} deleted`),s.go(-1)||s.push({name:"Home"})}catch(c){_.error("[]",c),m.error(c)}},goBack(){s.go(-1)},vault:i(()=>o.activeVault),size:i(()=>window.innerWidth<=768),owner:i(()=>o.account.id==o.activeVault.creatorId),items:i(()=>o.vKeeps),length:i(()=>o.vKeeps.length<5)}},components:{KeepCard:j}},V=a=>(P("data-v-86ad6ea3"),a=a(),M(),a),D={key:0,class:"container"},F={class:"row justify-content-center"},H={class:"col-md-10"},R={class:"container"},E={class:"row justify-content-center"},O={class:"col-md-8 position-relative"},T={class:"card border-0 my-3 elevation-5 rounded"},W=["src","title"],q={class:"card-img-overlay d-flex flex-column justify-content-end text-shadow"},G={key:0,class:"mdi mdi-lock me-2 mt-2 fs-4",title:"private vault"},J={class:"card-title text-shadow text-center"},L={class:"fs-6 mt-5"},Q={class:"d-flex justify-content-between"},U={class:"d-flex align-items-center"},X={key:0,class:"dropend"},Y=V(()=>t("button",{class:"btn border-0 p-0",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",title:"vault menu"},[t("i",{class:"mdi mdi-dots-horizontal h-25 align-top fs-1 text-danger selectable rounded"})],-1)),Z={class:"dropdown-menu dropdown-menu-dark"},$={class:"container"},tt={class:"row justify-content-center"},et={class:"col-6 rounded-pill orange"},st={key:0,class:"text-center text-shadow fs-3 d-flex gap-2 justify-content-center"},ot=V(()=>t("div",null,"keeps",-1)),at={key:1,class:"text-center fs-3"},nt={class:"row justify-content-center"},it={class:"col-12"};function lt(a,s,p,e,n,c){var f,y,w;const g=k("KeepCard"),b=k("masonry-wall");return e.vault?(d(),l("div",D,[t("div",F,[t("div",H,[t("div",R,[t("div",E,[t("div",O,[t("div",T,[t("img",{src:(f=e.vault)==null?void 0:f.coverImg,class:"card-img img-fluid height position relative",alt:"",title:e.vault.name},null,8,W),t("div",q,[e.vault.isPrivate?(d(),l("i",G)):v("",!0),t("h1",J,[K(h((y=e.vault)==null?void 0:y.name)+" ",1),t("div",L," By "+h((w=e.vault)==null?void 0:w.creator.name),1)])])]),t("div",Q,[t("div",U,[t("i",{class:"mdi mdi-arrow-left fw-bold fs-1",title:"back button","aria-label":"back button",onClick:s[0]||(s[0]=r=>e.goBack())})]),e.owner?(d(),l("div",X,[Y,t("ul",Z,[t("li",null,[t("a",{class:"dropdown-item",title:"edit vault",onClick:s[1]||(s[1]=r=>e.editVault())},"edit")]),t("li",null,[t("a",{class:"dropdown-item",title:"delete vault",onClick:s[2]||(s[2]=r=>e.deleteVault(e.vault))},"delete")])])])):v("",!0)])])])]),t("div",$,[t("div",tt,[t("div",et,[e.items.length?(d(),l("div",st,[t("div",null,h(e.items.length),1),ot])):(d(),l("div",at,"vault is empty"))])]),t("div",nt,[t("div",it,[x(b,{items:e.items,"column-width":e.size?150:250,gap:16,class:"mt-5"},{default:S(({item:r,index:dt})=>[t("div",null,[x(g,{keep:r},null,8,["keep"])])]),_:1},8,["items","column-width"])])])])])])])):v("",!0)}const rt=C(A,[["render",lt],["__scopeId","data-v-86ad6ea3"]]);export{rt as default};

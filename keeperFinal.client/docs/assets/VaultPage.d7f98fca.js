import{_ as b,i as C,A as s,D as u,M as I,j as _,d as l,K as B,c as i,a as t,b as m,g as j,t as v,l as w,z as K,B as S,C as z,h as x,o as c,p as N,f as P}from"./index.efe8b8bf.js";const M={setup(){const a=S(),o=z();C(()=>{h(),e()});async function h(){try{s.activeVault=null,await u.getVaultById(a.params.id),console.log(s.activeVault)}catch{console.error("[bad vault]"),o.push({name:"Home"})}}async function e(){try{await u.getKeepsInVault(a.params.id)}catch(n){console.error("[bad user]",n)}}return{editVault(){s.modal=1,s.vaultForm=1,I.getOrCreateInstance("#vaultForm").show()},async deleteVault(n){try{if(!await _.confirm())return;await u.deleteVault(n.id),_.success(`${n.name} deleted`),o.go(-1)||o.push({name:"Home"})}catch(d){console.error("[]",d),_.error(d)}},goBack(){o.go(-1)},vault:l(()=>s.activeVault),size:l(()=>window.innerWidth<=768),owner:l(()=>s.account.id==s.activeVault.creatorId),items:l(()=>s.vKeeps),length:l(()=>s.vKeeps.length<5)}},components:{KeepCard:B}},k=a=>(N("data-v-4a2c09d4"),a=a(),P(),a),A={key:0,class:"container"},D={class:"row justify-content-center"},F={class:"col-md-10"},H={class:"container"},R={class:"row justify-content-center"},E={class:"col-md-8 position-relative"},O={class:"card border-0 my-3 elevation-5 rounded"},T=["src","title"],W={class:"card-img-overlay d-flex flex-column justify-content-end text-shadow"},q={key:0,class:"mdi mdi-lock me-2 mt-2 fs-4",title:"private vault"},G={class:"card-title text-shadow text-center"},J={class:"fs-6 mt-5"},L={class:"d-flex justify-content-between"},Q={class:"d-flex align-items-center"},U={key:0,class:"dropend"},X=k(()=>t("button",{class:"btn border-0 p-0",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",title:"vault menu"},[t("i",{class:"mdi mdi-dots-horizontal h-25 align-top fs-1 text-danger selectable rounded"})],-1)),Y={class:"dropdown-menu dropdown-menu-dark"},Z={class:"container"},$={class:"row justify-content-center"},tt={class:"col-6 rounded-pill orange"},et={key:0,class:"text-center text-shadow fs-3 d-flex gap-2 justify-content-center"},ot=k(()=>t("div",null,"keeps",-1)),st={key:1,class:"text-center fs-3"},at={class:"row justify-content-center"},nt={class:"col-12"};function lt(a,o,h,e,n,d){var f,g,y;const p=x("KeepCard"),V=x("masonry-wall");return e.vault?(c(),i("div",A,[t("div",D,[t("div",F,[t("div",H,[t("div",R,[t("div",E,[t("div",O,[t("img",{src:(f=e.vault)==null?void 0:f.coverImg,class:"card-img img-fluid height position relative",alt:"",title:e.vault.name},null,8,T),t("div",W,[e.vault.isPrivate?(c(),i("i",q)):m("",!0),t("h1",G,[j(v((g=e.vault)==null?void 0:g.name)+" ",1),t("div",J," By "+v((y=e.vault)==null?void 0:y.creator.name),1)])])]),t("div",L,[t("div",Q,[t("i",{class:"mdi mdi-arrow-left fw-bold fs-1",title:"back button","aria-label":"back button",onClick:o[0]||(o[0]=r=>e.goBack())})]),e.owner?(c(),i("div",U,[X,t("ul",Y,[t("li",null,[t("a",{class:"dropdown-item",title:"edit vault",onClick:o[1]||(o[1]=r=>e.editVault())},"edit")]),t("li",null,[t("a",{class:"dropdown-item",title:"delete vault",onClick:o[2]||(o[2]=r=>e.deleteVault(e.vault))},"delete")])])])):m("",!0)])])])]),t("div",Z,[t("div",$,[t("div",tt,[e.items.length?(c(),i("div",et,[t("div",null,v(e.items.length),1),ot])):(c(),i("div",st,"vault is empty"))])]),t("div",at,[t("div",nt,[w(V,{items:e.items,"column-width":e.size?150:250,gap:16,class:"mt-5"},{default:K(({item:r,index:it})=>[t("div",null,[w(p,{keep:r},null,8,["keep"])])]),_:1},8,["items","column-width"])])])])])])])):m("",!0)}const dt=b(M,[["render",lt],["__scopeId","data-v-4a2c09d4"]]);export{dt as default};
